var config = require('./webpack.release.js')
var webpack = require('webpack')
var ClosureCompiler = require('google-closure-compiler-js').webpack

config.output.filename = config.output.filename.replace(/\.js$/, '.min.js')
config.mode = 'production'
config.plugins = [
  new webpack.DefinePlugin({
    'process.env': {
      NODE_ENV: '"production"'
    }
  })].concat(config.plugins.concat([
    new webpack.optimize.OccurrenceOrderPlugin(),
    new ClosureCompiler({
      options: {
        languageIn: 'ECMASCRIPT6',
        languageOut: 'ECMASCRIPT6',
        compilationLevel: 'SIMPLE',
        warningLevel: 'QUIET'
      }
    })
  ]))

module.exports = config
